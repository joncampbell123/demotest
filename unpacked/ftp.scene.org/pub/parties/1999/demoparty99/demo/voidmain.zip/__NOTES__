Why the demo failed the test:
- Consistently crashes after "when you wish upon a star", which suggests memory corruption. In fact, it corrupts memory below 64KB (NULL pointer deref?) which causes a crash the next time it calls INT 21h AH=0Bh, which the demo polls to detect when you hit the ESC key. DOS MCB chain corruption too.
NOTES:
- This demo has code to ensure the CPU has MMX extensions, however the test is flawed in that it does a (EDX & mask) != 0 test, the mask of which includes many unrelated features like whether CMPXCHG8B is present and whether a reserved bit is set, whether ACPI MSRs are present, but it does at least cover the MMX bit too. It does correctly detect that DOSBox SVN does not have MMX extensions, however the additional bits from DOSBox-X make it think MMX extensions are present even when cputype=pentium where MMX extensions are not present. Part of the test seems to be, if (EDX & mask) == 0, whether it can do the same test with CPUID 80000001h, which on 486/Pentium CPUs is a mirror of CPUID 00000001h
